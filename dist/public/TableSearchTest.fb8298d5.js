let e=document.createElement("style");e.innerHTML="",document.head.appendChild(e);import{d as a,m as t,q as l,s as r,b as o,o as n,e as d,g as s,E as u,G as i,H as m,T as p,y as c,j as h,L as g,r as b,I as f,M as y,D as w,f as C,t as z}from"./index.9cf25e1c.js";import{s as S,a as _,v as V}from"./CardListItem.1db1a63f.js";var v=a({name:"TableSearch",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:0}},emits:["size-change","current-change"],setup:(e,a)=>({isShow:t(!1),handleSizeChange:e=>a.emit("size-change",e),handleCurrentChange:e=>a.emit("current-change",e)})});const x=c("data-v-73bb3436");l("data-v-73bb3436");const k={class:"table-search flex flex-col"},T={class:"flex justify-between items-center mb-2"},L=h(" 高级搜索");r();const U=x(((e,a,t,l,r,c)=>{const h=o("el-button"),g=o("el-button-group"),b=o("el-pagination");return n(),d("div",k,[s(p,{name:"el-zoom-in-top"},{default:x((()=>[u(s("div",null,[m(e.$slots,"search")],512),[[i,e.isShow]])])),_:3}),s("div",T,[s("div",null,[s(g,null,{default:x((()=>[s(h,{type:"primary",icon:"el-icon-edit"}),s(h,{type:"primary",icon:"el-icon-share"}),s(h,{type:"primary",icon:"el-icon-delete"})])),_:1})]),s(h,{type:"text",onClick:a[1]||(a[1]=a=>e.isShow=!e.isShow)},{default:x((()=>[L,s("i",{class:{"el-icon-arrow-down":!e.isShow,"el-icon-arrow-up":e.isShow}},null,2)])),_:1})]),m(e.$slots,"default"),s(b,{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])}));v.render=U,v.__scopeId="data-v-73bb3436";const j="/getTableList";const M=(e,a)=>{const l=b({}),r=t(null);return{rules:l,submit:async()=>{await V(r)&&(e.page=1,I(e,a))},refForm:r}},I=async(e,a)=>{const t=await(l={page:e.page,size:e.size,tag:a.tag},g({url:j,method:"get",data:l}));var l;e.data=t.data.Data.data,e.total=t.data.Data.total},D=(e,a)=>{I(e,a);return{table:e,handleSizeChange:t=>(e.size=t)&&I(e,a),handleCurrentChange:t=>(e.page=t)&&I(e,a),indexMethod:a=>(e.page-1)*e.size+a+1,getSummaries:y}};var N=a({name:"TableSearchTest",components:{TableSearch:v,CardList:S,CardListItem:_},setup(){const e=b({date:"",name:"",address:"",tag:"所有"}),a=b({data:[],total:0,page:1,size:10});return{form:e,table:a,format:f,...D(a,e),...M(a,e)}}});const E=h(" 搜索 "),F=h(" 日期 "),H=h(" 姓名 "),K=h(" 地址 "),P=h(" 标签 ");N.render=function(e,a,t,l,r,i){const m=o("el-button"),p=o("el-button-group"),c=o("el-date-picker"),g=o("card-list-item"),b=o("el-input"),f=o("el-radio"),y=o("el-radio-group"),S=o("card-list"),_=o("el-col"),V=o("el-row"),v=o("el-table-column"),x=o("el-tag"),k=o("el-table"),T=o("table-search"),L=w("format");return n(),d(T,{"current-page":e.table.page,"page-size":e.table.size,total:e.table.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},{search:C((()=>[s(V,{gutter:15,class:"clear-both"},{default:C((()=>[s(_,{span:24},{default:C((()=>[s(S,{ref:a=>{e.refForm=a},title:"高级搜索",type:"KeyValue","show-header":!0,form:e.form,rules:e.rules},{btn:C((()=>[s(p,null,{default:C((()=>[s(m,{icon:"el-icon-search",onClick:e.submit},{default:C((()=>[E])),_:1},8,["onClick"])])),_:1})])),KeyValue:C((()=>[s(g,{width:"100px",prop:"name"},{key:C((()=>[F])),value:C((()=>[s(c,{modelValue:e.form.date,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.date=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])),_:1}),s(g,{width:"100px",prop:"name"},{key:C((()=>[H])),value:C((()=>[s(b,{modelValue:e.form.name,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.name=a),placeholder:"请输入姓名"},null,8,["modelValue"])])),_:1}),s(g,{width:"100px",prop:"address"},{key:C((()=>[K])),value:C((()=>[s(b,{modelValue:e.form.address,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.address=a),placeholder:"请输入地址"},null,8,["modelValue"])])),_:1}),s(g,{width:"100px",prop:"tag"},{key:C((()=>[P])),value:C((()=>[s(y,{modelValue:e.form.tag,"onUpdate:modelValue":a[4]||(a[4]=a=>e.form.tag=a)},{default:C((()=>[s(f,{label:"所有"}),s(f,{label:"家"}),s(f,{label:"学校"}),s(f,{label:"超市"}),s(f,{label:"公司"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["form","rules"])])),_:1})])),_:1})])),default:C((()=>[s(k,{ref:"filterTable","row-key":"date",border:"",data:e.table.data,style:{width:"100%"},"summary-method":e.getSummaries,"show-summary":""},{default:C((()=>[s(v,{type:"index",width:"50",index:e.indexMethod},null,8,["index"]),s(v,{prop:"date",label:"日期",sortable:"",width:"180","column-key":"date"}),s(v,{prop:"name",label:"姓名",width:"180"}),s(v,{prop:"address",label:"地址"}),s(v,{prop:"amt",label:"金额"},{default:C((e=>[u(s(b,{modelValue:e.row.amt,"onUpdate:modelValue":a=>e.row.amt=a,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"]),[[L,[e.row,"amt"],"money"]])])),_:1}),s(v,{prop:"tag",label:"标签",width:"100"},{default:C((e=>[s(x,{type:"家"===e.row.tag?"primary":"公司"===e.row.tag?"danger":"超市"===e.row.tag?"info":"success","disable-transitions":""},{default:C((()=>[h(z(e.row.tag),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["data","summary-method"])])),_:1},8,["current-page","page-size","total","onSizeChange","onCurrentChange"])};export default N;
