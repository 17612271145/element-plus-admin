import{d as e,m as a,b as t,o as l,e as r,g as o,f as n,E as d,J as s,G as u,T as i,j as m,L as p,r as c,H as g,M as h,D as f,t as b}from"./index.e88ef7e9.js";import{v as y}from"./formExtend.2da9e98f.js";import{s as w,a as C}from"./CardListItem.2c908e07.js";var z=e({name:"TableSearch",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:0}},emits:["size-change","current-change"],setup:(e,t)=>({isShow:a(!1),handleSizeChange:e=>t.emit("size-change",e),handleCurrentChange:e=>t.emit("current-change",e)})});const S={class:"table-search flex flex-col"},V={class:"flex justify-between items-center mb-2"},_=m(" 高级搜索");z.render=function(e,a,m,p,c,g){const h=t("el-button"),f=t("el-button-group"),b=t("el-pagination");return l(),r("div",S,[o(i,{name:"el-zoom-in-top"},{default:n((()=>[d(o("div",null,[u(e.$slots,"search")],512),[[s,e.isShow]])])),_:3}),o("div",V,[o("div",null,[o(f,null,{default:n((()=>[o(h,{type:"primary",icon:"el-icon-edit"}),o(h,{type:"primary",icon:"el-icon-share"}),o(h,{type:"primary",icon:"el-icon-delete"})])),_:1})]),o(h,{type:"text",onClick:a[1]||(a[1]=a=>e.isShow=!e.isShow)},{default:n((()=>[_,o("i",{class:{"el-icon-arrow-down":!e.isShow,"el-icon-arrow-up":e.isShow}},null,2)])),_:1})]),u(e.$slots,"default"),o(b,{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])};const x="/getTableList";const v=(e,t)=>{const l=c({}),r=a(null);return{rules:l,submit:async()=>{await y(r)&&(e.page=1,k(e,t))},refForm:r}},k=async(e,a)=>{const t=await(l={page:e.page,size:e.size,tag:a.tag},p({url:x,method:"get",data:l}));var l;e.data=t.data.Data.data,e.total=t.data.Data.total},T=(e,a)=>{k(e,a);return{table:e,handleSizeChange:t=>(e.size=t)&&k(e,a),handleCurrentChange:t=>(e.page=t)&&k(e,a),indexMethod:a=>(e.page-1)*e.size+a+1,getSummaries:h}};var j=e({name:"TableSearchTest",components:{TableSearch:z,CardList:w,CardListItem:C},setup(){const e=c({date:"",name:"",address:"",tag:"所有"}),a=c({data:[],total:0,page:1,size:10});return{form:e,table:a,format:g,...T(a,e),...v(a,e)}}});const U=m(" 搜索 "),L=m(" 日期 "),M=m(" 姓名 "),D=m(" 地址 "),N=m(" 标签 ");j.render=function(e,a,s,u,i,p){const c=t("el-button"),g=t("el-button-group"),h=t("el-date-picker"),y=t("card-list-item"),w=t("el-input"),C=t("el-radio"),z=t("el-radio-group"),S=t("card-list"),V=t("el-col"),_=t("el-row"),x=t("el-table-column"),v=t("el-tag"),k=t("el-table"),T=t("table-search"),j=f("format");return l(),r(T,{"current-page":e.table.page,"page-size":e.table.size,total:e.table.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},{search:n((()=>[o(_,{gutter:15,class:"clear-both"},{default:n((()=>[o(V,{span:24},{default:n((()=>[o(S,{ref:a=>{e.refForm=a},title:"高级搜索",type:"KeyValue","show-header":!0,form:e.form,rules:e.rules},{btn:n((()=>[o(g,null,{default:n((()=>[o(c,{icon:"el-icon-search",onClick:e.submit},{default:n((()=>[U])),_:1},8,["onClick"])])),_:1})])),KeyValue:n((()=>[o(y,{width:"100px",prop:"name"},{key:n((()=>[L])),value:n((()=>[o(h,{modelValue:e.form.date,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.date=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])),_:1}),o(y,{width:"100px",prop:"name"},{key:n((()=>[M])),value:n((()=>[o(w,{modelValue:e.form.name,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.name=a),placeholder:"请输入姓名"},null,8,["modelValue"])])),_:1}),o(y,{width:"100px",prop:"address"},{key:n((()=>[D])),value:n((()=>[o(w,{modelValue:e.form.address,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.address=a),placeholder:"请输入地址"},null,8,["modelValue"])])),_:1}),o(y,{width:"100px",prop:"tag"},{key:n((()=>[N])),value:n((()=>[o(z,{modelValue:e.form.tag,"onUpdate:modelValue":a[4]||(a[4]=a=>e.form.tag=a)},{default:n((()=>[o(C,{label:"所有"}),o(C,{label:"家"}),o(C,{label:"学校"}),o(C,{label:"超市"}),o(C,{label:"公司"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["form","rules"])])),_:1})])),_:1})])),default:n((()=>[o(k,{ref:"filterTable","row-key":"date",border:"",data:e.table.data,style:{width:"100%"},"summary-method":e.getSummaries,"show-summary":""},{default:n((()=>[o(x,{type:"index",width:"50",index:e.indexMethod},null,8,["index"]),o(x,{prop:"date",label:"日期",sortable:"",width:"180","column-key":"date"}),o(x,{prop:"name",label:"姓名",width:"180"}),o(x,{prop:"address",label:"地址"}),o(x,{prop:"amt",label:"金额"},{default:n((e=>[d(o(w,{modelValue:e.row.amt,"onUpdate:modelValue":a=>e.row.amt=a,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"]),[[j,[e.row,"amt"],"money"]])])),_:1}),o(x,{prop:"tag",label:"标签",width:"100"},{default:n((e=>[o(v,{type:"家"===e.row.tag?"primary":"公司"===e.row.tag?"danger":"超市"===e.row.tag?"info":"success","disable-transitions":""},{default:n((()=>[m(b(e.row.tag),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["data","summary-method"])])),_:1},8,["current-page","page-size","total","onSizeChange","onCurrentChange"])};export default j;
